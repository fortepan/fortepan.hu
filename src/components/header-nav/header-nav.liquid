<header-nav class="header-nav {{ header_class }}">
  <div class="header-nav__logo">
    <a href="/{{ locale }}/" class="header-nav__logo__link">
      {% inlineSVG src:"src/static/images/header-logo.svg" class:"header-nav__logo" %}
      <span>Fortepan</span>
    </a>
  </div>
  <div class="header-nav__search">
  {% unless hide_search %}
    {% include search/search.liquid class:"header-nav__search__search" %}
  {% endunless %}
  </div>
  <div class="header-nav__actions">
    {% unless hide_search %}
    <div class="header-nav__actions__group header-nav__actions__group--search">
      {% include button-circular/button-circular.liquid icon:"search" class:"button-circular--red" id:"HeaderSearchToggle" trigger:"dialogSimpleSearch:toggle" label:lang[locale].search %}
    </div>
    {% endunless %}
    <div class="header-nav__actions__group header-nav__actions__group--items">
      <a class="header-nav__link header-nav__link--top header-nav__link--top-action" href="/{{ locale }}/photos/">{{ lang[locale].photos }}</a>
      <a class="header-nav__link header-nav__link--top header-nav__link--top-action" href="/{{ locale }}/photos/?latest">{{ lang[locale].latest }}</a>
    </div>
    <div class="header-nav__actions__group header-nav__actions__group--nav">
      {% include button-circular/button-circular.liquid icon:"menu" trigger:"headerNav:toggleMenu" label:lang[locale].menu %}
      {% include button-circular/button-circular.liquid icon:"notification" trigger:"headerNav:toggleNotifications" label:lang[locale].notifications class:"header-nav__notification-icon" %}
      <div class="header-nav__profile-icon">
        {% include button-circular/button-circular.liquid icon:"profile" trigger:"headerNav:toggleProfile" label:lang[locale].profile class:"is-hidden-when-signed-in" %}
        {% include button-circular/button-circular.liquid icon:"profile-signed-in" trigger:"headerNav:toggleProfile" label:lang[locale].profile class:"is-visible-when-signed-in" %}
      </div>
    </div>
  </div>
  <div class="header-nav__popup" id="HeaderNavigationMenu">
    <a class="header-nav__link header-nav__link--top header-nav__link--hide-on-desktop" href="/{{ locale }}/photos/">{{ lang[locale].photos }}</a>
    <a class="header-nav__link header-nav__link--top header-nav__link--separator-after header-nav__link--hide-on-desktop" href="/{{ locale }}/photos/?latest">{{ lang[locale].latest }}</a>
    <a class="header-nav__link header-nav__link--top" href="/{{ locale }}/about-us/">{{ lang[locale].about_us }}</a>
    <a class="header-nav__link header-nav__link--top" href="/{{ locale }}/donors/">{{ lang[locale].donors }}</a>
    <a class="header-nav__link header-nav__link--top" href="https://www.paypal.com/cgi-bin/webscr?cmd=_donations&business=fortepan%40fortepan.hu&currency_code=HUF&source=url" target="_blank">{{ lang[locale].donate }}</a>
    <a class="header-nav__link header-nav__link--top" href="https://hetifortepan.capacenter.hu" target="_blank">Heti Fortepan</a>
    <a class="header-nav__link header-nav__link--top" href="https://forum.index.hu/Article/showArticle?t=9204653" target="_blank">{{ lang[locale].forum }}</a>
    <a class="header-nav__link header-nav__link--top header-nav__link--separator-after" href="https://www.facebook.com/FortepanArchivum/" target="_blank">Facebook</a>
    <a class="header-nav__link" href="mailto:fortepan@gmail.com">{{ lang[locale].contact_us }}</a>
    <a class="header-nav__link" href="/{{ locale }}/privacy/">{{ lang[locale].privacy_policy }}</a>
  </div>
  <div class="header-nav__popup" id="HeaderNavigationProfile">
    <a href="#" class="header-nav__link header-nav__link--top is-hidden-when-signed-in" id="HeaderSignin" data-trigger="dialogSignin:show">{{ lang[locale].signin }}</a>
    <a href="#" class="header-nav__link header-nav__link--top header-nav__link--separator-after is-hidden-when-signed-in" id="HeaderSignup" data-trigger="dialogSignup:show">{{ lang[locale].signup }}</a>
    <a href="#" class="header-nav__link header-nav__link--top is-visible-when-signed-in" id="HeaderProfile">
      <span id="HeaderProfileName"></span>
      <span id="HeaderProfileEmail" class="header-nav__link__small"></span>
    </a>
    <a href="#" class="header-nav__link header-nav__link--top header-nav__link--separator-after is-visible-when-signed-in" id="HeaderSignout">{{ lang[locale].signout }}</a>
    <h6>{{ lang[locale].settings }}</h6>
    <a href="#" class="header-nav__link header-nav__link--top header-nav__link--separator-after" id="DarkThemeSwitcher" data-trigger="toggleTheme">
      {{ lang[locale].darkmode }}
      <span class="header-nav__toggle-switch"></span>
    </a>
    <h6>{{ lang[locale].language }}</h6>
    {% for l in siteConfig.LOCALES %}
    <a class="header-nav__link header-nav__link--top header-nav__link__lang lang-{{ l[0] }}" data-lang="{{ l[0] }}" href="/{{ l[0] }}/">{{ l[1] }}</a>
    {% endfor %}
  </div>

  <div class="header-nav__popup header-nav__notifications" id="HeaderNavigationNotifications">
    <h3 class="header-nav__popup__heading">{{ lang[locale].notifications }}</h3>
    <ul class="header-nav__notifications__messages">
      {% capture now %}{% now %}{% endcapture %}
      {% assign count = 0 %}
      {% for notification in notifications.notifications %}
      {% if notification.date < now and notification.lang == locale and count < 4 %}
      {% assign count = count | plus: 1 %}
      <li class="header-nav__notifications__message" data-date="{{ notification.date }}">
        <header class="header-nav__notifications__message__header">
          <h5 class="header-nav__notifications__message__title">{{ notification.title }}</h5>
          <span class="header-nav__notifications__message__date">{% date notification.date, locale %}</span>
        </header>
        <p class="header-nav__notifications__message__content">{{ notification.message | markdownify }}</p>
      </li>
      {% endif %}
      {% endfor %}
      {% if count == 0 %}
      <li class="header-nav__notifications__message">{{ lang[locale].notifications_empty }}</li>
      {% endif %}
    </ul>
  </div>
</header-nav>